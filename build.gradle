plugins {
	id 'me.champeau.gradle.jmh' version '0.5.0' apply false
}

allprojects {
	apply plugin: 'java'
	apply plugin: 'jacoco'
	apply plugin: 'checkstyle'
	apply plugin: 'me.champeau.gradle.jmh'

	sourceCompatibility = 11
	targetCompatibility = 11

	repositories {
		mavenCentral()
	}

	dependencies {
		testCompile 'org.junit.jupiter:junit-jupiter-api:5.5.2'
		testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.5.2'
	}

	test {
		useJUnitPlatform()
	}
	
	jacocoTestReport {
		reports {
			xml.enabled true
			html.enabled true
		}
	}
	
	checkstyle {
		toolVersion = '8.29'
		checkstyleTest.enabled = false // No style checking for unit tests, for now
		checkstyleJmh.enabled = false
	}
}

subprojects {
	dependencies {
		compile rootProject
	}
}